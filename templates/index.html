<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåé Sismo Monitoreo TV</title>
<style>
body {margin:0; padding:0; background:black; color:#00ffcc; font-family:Arial; text-align:center;}
h1 {padding:20px; font-size:2em;}
#alerta {font-size:2em; color:red; font-weight:bold; animation: blink 1s infinite;}
@keyframes blink {50% {opacity:0;}}
.card {background:#0a0a0a; border:2px solid #00ffe1; padding:12px; margin:10px auto; border-radius:10px; width:90%; max-width:600px; box-shadow:0 0 10px #00ffe155; text-align:left;}
.big-mag {font-size:32px; font-weight:bold; color:yellow;}
button {padding:10px 20px; font-size:18px; border:none; border-radius:5px; background:red; color:white; margin:20px; cursor:pointer;}
button:hover {background:#ff5555;}
</style>
</head>
<body>
<h1>üåê MONITOREO S√çSMICO GLOBAL</h1>
<div id="alerta"></div>
<div id="sismos"></div>
<button onclick="simulacro()">üö® SIMULACRO SISMO FUERTE</button>

<script>
async function cargarSismos(){
    try {
        const res = await fetch("/api/sismos");
        const data = await res.json();
        let html = "";
        let alerta = "";
        data.forEach(s => {
            html += `<div class="card">
                <div class="big-mag">M ${s.magnitud}</div>
                <b>${s.fuente}</b><br>
                Lugar: ${s.lugar}<br>
                Tiempo: ${new Date(s.tiempo).toLocaleString('es-MX')}
            </div>`;
            if(s.magnitud >= 6){ alerta = "‚ö† SISMO FUERTE DETECTADO"; }
        });
        document.getElementById("sismos").innerHTML = html;
        document.getElementById("alerta").innerText = alerta;
    } catch(err){
        console.error(err);
        document.getElementById("sismos").innerHTML = "<p>Error cargando datos.</p>";
    }
}
async function simulacro(){
    try {
        const res = await fetch("/api/simulacro");
        const s = await res.json();
        alert(`SIMULACRO MAG ${s.magnitud} en ${s.lugar}`);
    } catch(err){
        console.error(err);
        alert("Error al ejecutar simulacro");
    }
}
// Refresh cada 10 segundos
cargarSismos();
setInterval(cargarSismos, 10000);
</script>
</body>
</html>
